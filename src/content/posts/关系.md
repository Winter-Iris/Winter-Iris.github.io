---
title: 关系
description: 离散数学中的关系
category: 离散数学
published: 2026-01-19
tags:
  - 离散数学
---
## 二元关系

- 两个对象之间的联系的数学模型，罗列所有有联系的对象，表示为二元组。
- 集合$X$和$Y$
- $X$到$Y$的二元关系： $X×Y$的子集
- $X$上的二元关系： $X$到$X$的二元关系
- $x,y$满足关系$R(xRy)$：$(x,y)∈R$,$x$是$y$的前件，$y$是$x$的后件

### 定义域，值域

- $R$是$X$到$Y$的二元关系
- 定义域：$dom(R) = \{x|x\in X \wedge \exists y \in Y ,s.t. (x,y)\in R\} \subseteq X$
- 值域：$ran(R) = \{y|y\in Y \wedge \exists x \in X ,s.t. (x,y)\in R\} \subseteq Y$

### 特殊关系

- 空关系：$\phi$
- 全关系：$X\times Y$
- 恒等关系：$I_x = \{(x,x)|x\in X\}$

## 二元关系的表示

### 关系图

- **有向图**，顶点表示$X$和$Y$中的元素，左边一列顶点表示$X$中的元素，右边一列顶点表示$Y$中的元素，顶点$x$到$y$的有向边(箭头)存在 $⇔ (x,y)∈R$
- 如果$X=Y$，则$X$中的元素不重复画两次

### 关系矩阵

$$X = \{x_1,x_2,...,x_m\},Y = \{y_1,y_2,...y_n\}$$
$$M_R=(r_{ij})_{m\times n}=\begin{bmatrix}r_{11}&r_{12}&...&r_{1n}\\r_{21}&r_{22}&\cdots&r_{2n}\\\vdots&\vdots&&\vdots\\r_{m1}&r_{m2}&\cdots&r_{mn}\end{bmatrix}$$
$$\mathrm{r_{ij}=}\begin{cases}1&(x_i,y_j)\in R\\0&(x_i,y_j)\notin R\end{cases}$$
### 一些性质

- 关系矩阵的元素之和=关系的基数
- 关系矩阵的元素之和=关系图中的箭头的个数
- 集合上的关系的关系矩阵必定是方阵
- 关系成为**函数** ⇔ 关系图中，**左边每个顶点的出度均为1** ⇔ **关系矩阵中，每行有且仅有一个1**

## n元关系

- 集合$X_1,X_2,...X_n$上的$n$元关系是$X_1\times X_2 \times ... \times X_n$的子集


## 关系的运算

- 实际上就是集合的运算：交，并，差，补。(此时全集为$X\times Y$)
- $R$在$Y$上的限制：$Y$上的关系$R$是$X$上的关系，$Y⊆X$，$\{(x,y)|x,y∈Y，且(x,y)∈R\}$

### 关系的逆

- $R$是$X$到$Y$的关系
- $R$的逆关系$R^{-1}$：$Y$到$X$的二元关系，$\{(y,x)|(x,y)∈R\}$

### 关系的复合

- 关系$R$和$S$的复合$R∘S$：$X$到$Z$的关系，$R$是$X$到$Y$的关系，$S$是$Y$到$Z$的关系
- $R∘S$=$\{(x,z)|x∈X∧z∈Z∧∃y,s.t.y∈Y∧(x,y)∈R∧(y,z)∈S\}$
- 注意
	- $∘$的交换律不成立
	- 并非任意两个关系都可以进行复合

### 关系的幂

- $R$是$X$上的关系，$n\in \mathbb N$
$$R^n=\begin{cases}I_X&n=0\\R^{n-1}\circ R&n\in Z\end{cases}+$$
### 关系运算的性质

- $(R^{-1})^{-1} = R$
- $(R \cap S)^{-1} = R^{-1} \cup S^{-1}$
- $(R \cup S)^{-1} = R^{-1} \cap S^{-1}$
- $(R \circ S)^{-1} = S^{-1} \circ R^{-1}$
- $(R\circ S) \circ T = R\circ (S \circ T)$
- $X$上的关系$R$，$∀m,n∈N,R^{m+n}=R^m∘R^n$
- $∀(x,y)，(x,y)∈R^n$ $⇔$ $∃ n+1$元组 $(x_0,x_1,x_2,…,x_n)∈X^{n+1}$，$(x_i,x_{i+1})∈R，(i=0,1, …,n-1)，x_0=x，x_n=y$
- $X$：有限集， $|X|=n，n∈Z^+$ ， $R$：$X$上的关系，$x,y∈X$，$m∈N$，$(x,y)∈R^m , ∃k∈N，k≤n$，使$(x,y)∈R^k$
- $X$：有限集， $|X|=n，n∈Z^+$，$R$：$X$上的关系,$\bigcup_{m\in\mathbb{Z}^+}{R}^m=\bigcup_{m=1}^n{R}^m$

## 关系的特殊性质

- **自反关系**(reflexive)：$∀x∈X，(x,x)∈R$
- **反自反关系**(anti-reflexive)： $∀x∈X，(x,x)\not \in R$
- **对称关系**(symmetric)： $∀x,y∈X，(x,y)∈R \wedge (y,x)∈R$
- **反对称关系**(anti-symmetric)：$∀x,y∈X，(x,y)∈R ∧ (y,x)∈R ，则x=y$
- **传递关系**(transitive)：$∀x,y,z∈X，(x,y)∈R ∧ (y,z)∈R ，则 (x,z)∈R$

- $R$自反 $⇔$ $I_X⊆R$
- $R$反自反 $⇔$ $R∩I_X=∅$
- $R$对称 $⇔$ $R^{-1}=R$
- $R$反对称 $⇔$ $R∩R^{-1}⊆I_X$
- $R$传递 $⇔$ $R^2⊆R$
- $R$传递 $⇔$ $∀n∈Z^+，R^n⊆R$

### 关系的性质与关系矩阵的性质

- 关系自反 ⇔ 其矩阵对角线全1
- 关系反自反 ⇔ 其矩阵对角线全0
- 关系对称 ⇔ 其矩阵对称
- 关系反对称 ⇔ 其矩阵任意两不同对称位置上至少有一个0

###  关系的性质与关系图的性质

- 关系自反 ⇔ 其关系图每个顶点都有环
- 关系反自反 ⇔ 其关系图每个顶点均无环
- 关系对称 ⇔ 其关系图每对顶点之间若有边则必有两条方向相反的边
- 关系反对称 ⇔ 其关系图每对顶点之间至多只有一条边

## 关系的闭包

- P闭包：包含$R$、具有性质$P$、最小的$X$上的关系，$R$：$X$上的关系，$P$：一种关系的性质
- $R$的$P$闭包$R^P$是$X$上的关系，满足：
	- $P(R^P)$，即该关系是闭包的,$R^p$具有性质$P$
	- $R⊆R^P$，即该关系包括了$R$
	- $∀X$上的关系$R'$，若$P(R')$且$R ⊆R'$，则$R^P⊆R'$ ，即该关系最小

- **自反闭包**$r(R)$：$X$上包含$R$的最小的自反关系
- **对称闭包**$s(R)$：$X$上包含$R$的最小的对称关系
- **传递闭包**$t(R)$：$X$上包含$R$的最小的传递关系

- $r(R)=R∪I_X$
- $s(R)=R∪R^{-1}$
- $t(R)= \bigcup_{n=1}^{\infty} R^n$

## 等价关系与等价类

- 集合$X$上的**等价关系**： $X$上**自反、对称、传递**的关系
- $x$关于$R$的**等价类**$[x]_R$：$\{y | y∈X\wedge yRx\}⊆X$,$R$：$X$上的等价关系，$x∈X$,等价类$[x]_R$的代表元：$x$

- 若$R$是$X$上的等价关系，那么对于任意$x,y \in X$
	- 若$(x,y)\in R$，$[x]_R = [y]_R$，等价类中的任意元素都可以作为该等价类的代表元，
	- 若$(x,y)\not \in R$，$[x]_R \cap [y]_R = \phi$，任意两个等价类要么是同一类要么没有公共元素
	- $\bigcup_{z\in X}\space[z]_R = X$，

## 商集

- $X$关于$R$的商集$X/R$：$X$关于$R$的所有等价类所组成的集合 $X/R=\{[x]_R|x∈X\}$,$R$：$X$上的等价关系

## 划分

- 集合$X$的划分$\pi$，$\pi$是$X$的子集构成的集合族，$\pi \subseteq P(X)$,满足：
	- $\phi \not \in \pi$
	- $\forall A,B\in \pi,A=B\vee A\cap B = \phi$
	- $\bigcup_{A\in \pi} \space A =X$

- 若$R$是$X$上的等价关系，那么商集$X/R$是$X$的划分$\pi_R$。
- 设$\pi$是集合$X$的划分，那么$R:\{(x,y)|x,y属于\pi的同一个划分块\}$是$X$上的等价关系$R_{\pi}$
- 等价关系和划分是集合元素分类的两种描述方法，二者本质上是同一事物的两个不同方面

## 偏序关系

- $X$上的偏序关系：$X$上**自反、反对称和传递**的关系
- $x$和$y$关于偏序$≤$是可比较的 ⇔ $x≤y\vee y≤x$
- $x$在$y$的前面，$y$在$x$的后面：$x\prec y$，$y \succ x$
- $x$不在$y$的后面，$y$不在$x$的前面：$x\preceq y$，$y\succeq x$
- 这里的关系元素之间存在某种次序。

- **全序**(关系)：$X$上的偏序$\prec$,$∀x,y∈X$，$x\preceq y \vee y\preceq x$，偏序是全序 ⇔ 任一元素对都可比较

- 偏序集：二元组$(X,≤)$， $≤$是集合$X$上的偏序
- 全序集：偏序集 $(X,≤)$，$≤$是集合$X$上的全序

## 哈斯图

- 偏序集$(X,≤)$，$x,y∈X$，$y$**覆盖**(cover)$x$：$(x<y )∧( ¬∃z∈X，使x<z<y)$, $y$是$x$的**直接后继.**
- 哈斯图是有限偏序集的简化关系图，
	- 顶点$x$到顶点$y$有边 ⇔ $y$覆盖$x$，且y位于x上方
	- 省略所有的箭头：箭头总是从下方指向上方

## 偏序集的性质

- **最大(小)元**：比所有其他元素都大(小)的元素，$∀x∈X，x≤a(a≤x)$
- **极大(小)元**：不存在比它更大(小)的元素，但允许存在与它不可比较的元素,$¬∃x∈X，a<x(x<a)$

- 最大(小)元至多只有一个，也可以没有
- 极大(小)元可以有多个，也可以没有
- 极大(小)元不一定是最大(小)元，最大(小)元一定是极大(小)元
- 当最大(小)元存在时，极大(小)元也只有一个
- 全序集的极大(小)元一定是也最大(小)元，全序集的“最大(小)”和“极大(小)”没有区别
- 非空有限偏序集必有极大元和极小元

## 拓扑序列

- 算法：从小到大，每次找出一个极小元，删除，再重复。
- 设$(X,≤)$是有限偏序集,$|X|=n$，则$∃(x_1, x_2,…,  x_n)∈ X^n$  ,使得对任意$i,j∈Z^+$ ，若$x_i≤x_j$,则必有$i ≤ j(1≤ i, j ≤ n)$，这个序列称为$X$关于$≤$的拓扑序列。

## 格

### 确界

设$(X,≤)$是偏序集，$Y⊆X$，$a∈X$

- 若对$∀y∈Y$,$∃a$, $y≤a$, 称$a$为$Y$在$(X,≤)$中的**上界**(upper bound)。
- 若$∃Y$的上界$b$，$∀Y$的上界$a$，有$b≤a$，则称$b$为$Y$在$(X,≤)$中的**最小上界**(least upper bound)或**上确界**(supremum)，记为$sup_{(X,≤)} Y$。
- 若对$∀y∈Y$, $∃a$, $a≤y$, 称$a$为$Y$在$(X,≤)$中的下界(lower bound) 。 
- 若$∃Y$的下界b，$∀Y$的下界$a$，有$a≤b$，则称$b$为$Y$在$(X,≤)$中的**最大下界**(greatest lower bound)或**下确界**(infimum)，记为$inf_{(X,≤) } Y$。
- 对于任意偏序集的任意子集，其**上确界至多只有一个**，因为其最小性；同理，其**下确界也至多只有一个**。

### 格

- 如果一个偏序集的**每对元素都有上确界和下确界**，则称该偏序集为**格**。
- $(P(S), ⊆)$是格，其中$S$是集合
- 任意全序集都是格




